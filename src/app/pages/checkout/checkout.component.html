<section class="page-header py-5">
    <div class="overly"></div>   
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-6">
          <div class="content text-center">
            <h1 class="mb-3">Checkout</h1>
            <p>Hath after appear tree great fruitful green dominion moveth sixth abundantly image that midst of god day multiply youâ€™ll which</p>
  
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb bg-transparent justify-content-center">
              <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">Checkout</li>
            </ol>
          </nav>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="page-wrapper container p-5">
     <div class="checkout shopping">
        <div class="container">
           <div class="row">
              <div class="col-lg-7 pr-5">
                <div class="coupon-notice " data-toggle="modal" data-target="#coupon-modal">
                     <div class="bg-light p-3">
                         Have a coupon? <a routerLink="/checkout" class="fc-primary" >Click here to enter your code</a>
                     </div>
                 </div>
  
                 <div class="billing-details mt-5">
                    <h4 class="mb-4 fw-bold">Billing Details</h4>
                    <form class="checkout-form" [formGroup]="checkoutForm" (ngSubmit)="placeOrder()">
                     <div class="row">
                         <div class="col-lg-6">
                             <div class="form-group mb-4">
                                 <label for="first_name">First Name</label>
                                 <input type="text" class="form-control" id="first_name" placeholder="" formControlName="first_name">
                                 <div *ngIf="checkoutForm.get('first_name')?.invalid && checkoutForm.get('first_name')?.touched">
                                     This field is required.
                                 </div>
                             </div>
                         </div>
                         <div class="col-lg-6">
                             <div class="form-group mb-4">
                                 <label for="last_name">Last Name</label>
                                 <input type="text" class="form-control" id="last_name" placeholder="" formControlName="last_name">
                                 <div *ngIf="checkoutForm.get('last_name')?.invalid && checkoutForm.get('last_name')?.touched">
                                     This field is required.
                                 </div>
                             </div>
                         </div>
                         <div class="col-lg-12">
                             <div class="form-group mb-4">
                                 <label for="company_name">Country</label>
                                 <select class="form-control" formControlName="country">
                                     <option value="">Select an Option</option>
                                     <option value="Maroc">Maroc</option>
                                     <option value="France">France</option>
                                     <option value="USA">USA</option>
                                     <option value="UK">UK</option>
                                 </select>
                                 <div *ngIf="checkoutForm.get('country')?.invalid && checkoutForm.get('country')?.touched">
                                     This field is required.
                                 </div>
                             </div>
                         </div>

                         <div class="col-lg-12">
                           <div class="form-group mb-4">
                              <label for="city">Town / City</label>
                              <input type="text" class="form-control" id="city" placeholder="Enter town/city" formControlName="city">
                              <div *ngIf="checkoutForm.get('city')?.invalid && checkoutForm.get('city')?.touched">
                                 This field is required.
                              </div>
                           </div>
                        </div>
                        
                        <div class="col-lg-12">
                           <div class="form-group mb-4">
                              <label for="street">Street Address</label>
                              <input type="text" class="form-control" id="street" placeholder="Enter street address" formControlName="street">
                              <div *ngIf="checkoutForm.get('street')?.invalid && checkoutForm.get('street')?.touched">
                                 This field is required.
                              </div>
                           </div>
                        </div>
                        
                        <div class="col-lg-12">
                           <div class="form-group mb-4">
                              <label for="apartment">Apartment, suite, unit etc. (optional)</label>
                              <input type="text" class="form-control" id="apartment" placeholder="Enter apartment, suite, unit, etc." formControlName="apartment">
                           </div>
                        </div>
                        
                        <div class="col-lg-12">
                           <div class="form-group mb-4">
                              <label for="postcode">Postcode / ZIP *</label>
                              <input type="text" class="form-control" id="postcode" placeholder="Enter postcode/ZIP" formControlName="postcode">
                              <div *ngIf="checkoutForm.get('postcode')?.invalid && checkoutForm.get('postcode')?.touched">
                                 This field is required.
                              </div>
                           </div>
                        </div>
                        
                        <div class="col-lg-12">
                           <div class="form-group mb-4">
                              <label for="phone">Phone</label>
                              <input type="text" class="form-control" id="phone" placeholder="Enter phone number" formControlName="phone">
                              <div *ngIf="checkoutForm.get('phone')?.invalid && checkoutForm.get('phone')?.touched">
                                 This field is required.
                              </div>
                           </div>
                        </div>
                        
                        <div class="col-lg-12">
                           <div class="form-group mb-4">
                              <label for="email">Email address</label>
                              <input type="text" class="form-control" id="email" placeholder="Enter email address" formControlName="email">
                              <div *ngIf="checkoutForm.get('email')?.invalid && checkoutForm.get('email')?.touched">
                                 This field is required.
                              </div>
                           </div>
                        </div>
  
                          <!-- <div class="col-lg-12">
                           <div class="form-check mb-4">
                              <input type="checkbox" class="form-check-input" id="exampleCheck1">
                              <label class="form-check-label" for="exampleCheck1">Create an account?</label>
                            </div>
                          </div> -->
                          <div class="col-lg-12">
                              <div class="form-group mb-4">
                                <label for="first_name">Order notes (optional)</label>
                                <textarea class="form-control" id="msg" cols="30" rows="5" placeholder="Notes about order e:g: want to say something"></textarea>
                             </div>
                          </div>
                       </div>
                    </form>
                 </div>
              </div>
  
              <!-- Order sidebar Summery -->
              <div class="col-md-6 col-lg-5">
                 <div class="product-checkout-details mt-5 mt-lg-0">
                       <h4 class="mb-4 border-bottom pb-4 fw-bold">Order Summary</h4>
  
                       <div *ngFor="let product of dataSource" class="product-card d-flex align-items-center justify-between">
                            <p class="col-md-3">{{product.name}}</p>
                            <div class="col-md-2">{{product.prix | currency}}</div>
                            <div class="col-md-2 d-flex align-items-center justify-content-between gap-2">
                                <button
                                (click)="onRemoveQuantity(product)"
                                >
                                -
                                </button>
                            <span class="text-base">{{product.quantity}}</span> 
                            <button 
                            (click)="onAddQuantity(product)"
                            >
                            +
                            </button>
                            </div>
                            <div class="col-md-2 d-flex text-center align-items-center justify-content-center">
                                <p class="flex align-items-center m-0">{{product.quantity*product.prix|currency}}</p>
                            </div>
                            <div class="col-md-1 d-flex justify-content-end align-items-center">
                                <button
                                (click)="onRemoveFromCart(product)"
                                >
                                   <span class="p-2" style="color: black;">X</span>
                                </button>
                            </div>
                       </div>
  
                       <ul class="summary-prices list-unstyled mb-4">
                          <li class="d-flex justify-content-between">
                             <span >Subtotal:</span>
                             <span class="fw-bold">{{getTotal(dataSource)|currency}}</span>
                          </li>
                          <li class="d-flex justify-content-between">
                             <span >Shipping:</span>
                             <span class="fw-bold">Free</span>
                          </li>
                          <li class="d-flex justify-content-between">
                             <span>Total</span>
                             <span class="fw-bold">{{getTotal(dataSource)|currency}}</span>
                          </li>
                       </ul>
  
                       <form action="#">
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>
                            <label class="form-check-label" for="exampleRadios1">
                              Direct bank transfer 
                            </label>
  
                            <div class="alert alert-secondary mt-3" role="alert">
                               Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account.
                             </div>
                          </div>
  
                          <div class="form-check mb-3">
                            <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2">
                            <label class="form-check-label" for="exampleRadios2">
                               Check payments 
                            </label>
                          </div>
  
                           <div class="form-check mb-3">
                              <input type="checkbox" class="form-check-input" id="exampleCheck3">
                              <label class="form-check-label" for="exampleCheck3">I have read and agree to the website terms and conditions *</label>
                            </div>
                       </form>
  
                       <div class="info mt-4 border-top pt-4 mb-5">
                          Your personal data will be used to process your order, support your experience throughout this website, and for other purposes described in our <a href="#">privacy policy</a>.
                       </div>
                       <a (click)="placeOrderExternal()" class="btn btn-main btn-small">Place Order</a>
                 </div>
              </div>
           </div>
        </div>
     </div>
  </div>
  
  
     <!-- Modal -->
     <div class="modal fade" id="coupon-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
           <div class="modal-content py-5">
              <div class="modal-body">
                 <form>
                    <div class="form-group">
                       <input class="form-control" type="text" placeholder="Enter Coupon Code">
                    </div>
                    <button type="button" class="btn btn-main btn-small" data-dismiss="modal">Apply Coupon</button>
                 </form>
              </div>
           </div>
        </div>
     </div>